{% extends 'base.html' %}

{% block content %}
  <article class="media content-section">
    <div class="media-body">
      <div class="article-metadata">
        <a class="mr-2" href="#">{{ post.author.username }}</a>
        <small class="text-muted">{{ post.date_posted.strftime('%Y-%m-%d') }}</small>
      </div>
      <h2 class="article-title">{{ post.title }}</h2>
      <div class="article-content">
        {{ html_content|safe }}
      </div>

      <!-- Like and Share Buttons -->
      <div class="mt-4">
        <form method="POST" action="{{ url_for('blog.like_post', post_id=post.id) }}">
          <button type="submit" class="btn btn-info">Like {{ post.likes }}</button>
        </form>

        <form method="POST" action="{{ url_for('blog.share_post', post_id=post.id) }}">
          <button type="submit" class="btn btn-primary">Share {{ post.shares }}</button>
        </form>
      </div>

      {% if current_user == post.author %}
        <div class="mt-4">
          <a class="btn btn-outline-secondary btn-sm" href="{{ url_for('blog.edit_post', post_id=post.id) }}">Edit</a>
          <form method="post" action="{{ url_for('blog.delete_post', post_id=post.id) }}" style="display: inline-block;">
            <button type="submit" class="btn btn-outline-danger btn-sm">Delete</button>
          </form>
        </div>
      {% endif %}
    </div>
  </article>
{% endblock %}

